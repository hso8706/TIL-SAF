# 23.02.03
## JDBC
### Java DataBase Connectivity
- JDBC
  - SQL문을 실행할 수 있는 함수 호출 인터페이스(ANSI SQL 지원)
- JDBC 특징
  - DBMS 종류에 독립적으로 자바 프로그래밍 가능
  - DB가 달라져도 동인한 API 사용 가능(드라이버, URL만 수정하면 됨)
- JDBC 기능
  - DB에 연결을 설정함
  - SQL문장을 DBMS에 전송함
  - SQL문장을 전송 후 받은 결과를 처리할 수 있게함
- JDBC Interface
  - interface for vender
    - `driver` : 각각의 DBMS vender가 구현해놓은 interface가 driver이다.
  - interface for developer
    - 라이브러리로 사용
- JDBC API: java.sql package
  - [참고 링크](https://docs.oracle.com/javase/8/docs/api/)
  - Driver(interface)
    - 모든 드라이버가 반드시 구현해야하는 인터페이스
    - 드라이버에 대한 정보를 가지고 있다.


- JDBC 프로그래밍 작업 순서
  1. Driver Loading : JVM안으로 특정 드라이버 클래스를 적재
  2. Connection 생성 : DBMS와 연결, url 형태로 접속
  3. Statement 생성
        - Statement  
            : 쿼리 문장 한개를 담을 수 있는 그릇
            : 재활용 가능
        - PreparedStatement
  4. SQL 실행 : Query를 Statement에 담아서 DB로 보냄
    - stat.executeQuery(`query`);  
        : 인자(`query`)가 `select`인 경우  
        : 리턴 타입 => `Result`  
        : 컬럼명을 포함한 모든 데이터를 담아서 반환(첫 인덱스는 컬럼명)
        ```java
        ResultSet rs = stat.executeQuery(q); // rs의 컬럼이 3개라고 가정
        while(rs.next() == true){
            sout(rs.getString(1)) // DB index는 1부터 시작
            sout(rs.getString(2)) // sout(rs.getString("column_name"))도 같은 결과 반환, 하지만 속도는 index 조회가 더 빠름 
            sout(rs.getString(3))
        } //조회 시 .next()메서드 사용
        ```
    - stat.executeUpdate(`query`);  
        : 인자(`query`)가 `select`가 아닌 경우(`insert`, `delete`, `update`, `create` 등)  
        : 리턴 타입 => `int`  
        : 데이터가 변동된 records의 갯수가 반환  
  5. DB에서 온 결과 처리
    - ResultSet의 메서드
      - .next()
      - .getInt()
      - .getString()
      - .close() 등등
  6. 마무리 작업 : 자원 반납(`close()`)

- CustomerTest
  - Client
    - CustomerTeset
  - Server
    - CustomerService
      - interface
      - 기능의 종류만, 공개하고 싶은 범위만 인터페이스로 제작하고 제공
      - 실제 서비스 로직(구현체)은 따로 구현
    - CustomerDAO
      - CustomerService 구현체
      - jdbc와 연결(접근), Data Access Object, CRUD
    - Customer
      - DTO, 혹은 VO 라고 불리우는 객체
      - customer.table 안의 레코드 1건의 정보를 저장하기위한 목적
      - jdbc에서 record를 받아다 쓸 때, 정보 보관 및 이동용으로 사용
    - jdbc(Customer.table)