### JPA
- Java Persistence API
  - Java 언어로 사용하는 ORM 기술의 표준 사양(Specification)
  - interface라는 의미, 구현체는 따로 존재
  - 현재는 Jakarta Persistence라는 의미로 쓰임

### JPA 구현체
- Hibernate ORM, EclipseLink, DataNucleus 등 

### Hibernate ORM
- JPA 구현체
  - JPA의 기능을 사용함
  - 추가로 Hibernate 자체 api도 지원함
- JDBC API
  - Hibernate ORM 내부적으로 JDBC API를 사용함.

### JPA의 P의 의미
- Persistence
  - 오래 지속되게 한다는 의미
- Persistence Context
  - JPA가 사용하는 영속성 콘텍스트
  - ORM의 특징: Object와 DB table을 매핑하여 Entity 클래스 객체 안에 포함된 정보를 DB table에 저장함
  - JPA의 특징: 테이블과 매핑된 Entity 객체 정보를 Persistence Context에 보관하여 애플리케이션 내에서 오래 지속되도록 함.
- Persistence Context에 보관된 정보의 용도
  - DB Table에 데이터 저장, 수정, 조회, 삭제에 이용함

### Persistence Context
- 두 개의 영역
  - 1차 캐시
    - Entity 객체 저장
    - 1차 캐시에 Entity가 저장된 시점의 스냅샷을 생성
  - 쓰기 지연 SQL 저장소
    - Entity 객체를 사용하는 SQL 쿼리문 저장
    - 스냅샷을 기준으로 적절한 쿼리문을 자동으로 생성한다.

### JPA의 사용
- dependency
  ```java
  //Spring Data JPA(JPA API 포함)
  implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
  ```
- .yml 설정
  ```yml
  jpa:
    hibernate:
        ddl-auto: create # (1) 스키마 자동 생성
    show-sql: true # (2) SQL 쿼리 출력(log)
  ```

- Annotation for Entity
  - @Entity
    - 클래스 애너테이션
    - JPA의 관리 대상 Entity로 지정
  - @Id
    - 필드 애너테이션
    - 해당 필드를 Primary key로 지정
  - @GeneratedValue

- JPA 주요 요소
  - EntityManagerFactory
    - JPA 사용에 필요한 객체를 생성하는 역할(DI)
    - 메소드
      - .createEntityManager() : EntityManager 객체 생성
      - .getTransaction() : EntityTransaction 객체 생성
  - EntityManager
    - JPA의 API 메서드를 사용
    - JPA의 영속성 컨텍스트 관리
    - 메소드
      - .persist()
        - 매개변수 : Object, Entity 객체를 전달
        - 전달받은 Entity 객체의 정보를 영속성 컨텍스트(1차 캐시)에 저장시키는 메소드
        - 1차 캐시에 첫 스냅샷이 저장되었기 때문에 쓰기 지연 SQL 저장소에는 Entity 객체를 테이블에 저장하기 위한 Insert 쿼리문이 생성된다.
      - .find()
        - 매개변수1 : Entity.class
        - 매겨변수2 : Entity의 식별자 값
        - Entity 클래스를 조회하는 메소드
          - 1차로 영속성 컨텍스트에 존재하는지 확인함
          - 2차로 영속성 컨텍스트에 없다면 테이블에서 확인하도록 select 쿼리문을 보냄
      - .remove()
        - 매개변수 : Entity 객체를 전달
        - 1차 캐시에 존재하는 Entity 객체 정보를 제거하는 메소드
      - .flush()
        - EntityTransaction의 .commit() 메소드 호출 시 JPA 내부적으로 실행되는 메소드
        - 영속성 컨텍스트의 변경 내용을 DB에 반영시키는 역할을 하는 메소드
  - EntityTransaction
    - Persistence Context의 쓰기 지연 SQL 저장소에 있는 쿼리문을 실행시키는 역할
    - 메소드
      - .begin()
        - transaction을 시작하는 메소드
      - .commit()
        - 영속성 컨텍스트(쓰기 지연 SQL 저장소)에 저장되어 있는 쿼리문 실행

### 추가 필요 공부
- JPA LifeCycle
- ddl-auto 외 설정
- @GeneratedValue 생성 전략 옵션