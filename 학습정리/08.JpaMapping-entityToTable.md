# Entity, Table
### Annotation
- 필수 여부
  - 필수 애너테이션 : @Entity, @Id
  - 선택 애너테이션 : @Table
  
### @Entity
- 해당 클래스를 Jpa의 Entity 관리 대상으로 지정하는 애너테이션
- @Id와 같이 사용해야함(안하면 오류)
- name 속성을 설정하여 관리될 Entity의 이름을 바꿀 수 있음.
  - 기본값은 테이블명.

### @Table
- 주로 name 속성을 사용해서 테이블 명을 바꾸기위해 사용하는 애너테이션
- 클래스명과 테이블명이 달라야할 때 사용하면된다.
  - 특정 단어가 SQL 용어로 사용되는 경우가 해당되는 상황이다.

# Id
### 기본키 생성 전략
- JPA가 지원하는 기본키 생성 전략
  - 기본키 직접 할당 : 애플리케이션 코드(java 코드)상에서 직접 할당하는 방식
  - 기본키 자동 생성 : 기본키 생성을 데이터베이스에 위임하는 방식
- 기본키 자동 생성 종류
  - IDENTITY
    - MySql과 같이 AutoIncrement 기능을 제공하는 DBMS를 사용할 때 사용하는 전략
    - 자동으로 증가하는 숫자를 기본 키로 사용
  - SEQUENCE
    - Oracle과 같이 Sequence 전략을 지원하는 DBMS를 사용할 때 사용하는 전략
  - TABLE
    - key 생성 테이블을 따로 생성하고 Sequence 전략과 비슷한 내부 동작 방식을 사용하는 전략
  - AUTO
    - 표준 문법이 아닌 특정 DB에 특화된 기능을 사용할 떄 취하는 전략
    - Dialect
  - 기본키 생성 전략의 자세한 내용은 추후 공부

### @ID, @GeneratedValue
- @ID
  - 기본키 직접 할당 방식을 기본으로 함
- @GeneratedValue
  - 기본키 자동 생성 방식을 사용하기 위해 사용하는 애너테이션
  - `(strategy = GenerationType.{type name})`을 인자로 주어 사용할 전략을 선택하여 사용

# Column
### @Column
- 기본키가 아닌 필드에 사용하여 해당 필드가 DB Table의 Column과 매핑되게 하는 애너테이션
- 속성으로 nullable, updatable, unique 등을 설정할 수 있음.
- @Column이 없더라도 JPA는 기본키(@Id)외의 필드를 Column으로 인식하고 기본값으로 지정된 속성으로 매핑한다.

### Exception
- Entity 필드에서의 에러는 API 계층의 DTO 클래스에서 발생한 예외라고 볼 수 있음.
- 즉, @Column 애너테이션의 애트리뷰트 설정을 통해 일종의 Validation을 하는 셈
- 따라서 GlobalExceptionAdvice에서 캐치하여 처리할 수 있음

### LocalDataTime
- 시간과 날짜에 대한 column을 다루기 위해 사용되는 클래스
- DB내에서 TIMESTAMP 타입으로 매핑된다.
- 메소드
  - .now() : 현재 시간을 지정
- Date, Calendar 클래스를 사용할 수 있지만, 이런 경우 @Temporal 애너테이션의 사용이 동반되어야 한다.

### @Transient
- 해당 필드를 테이블의 컬럼과 매핑하지 않겠다는 의미를 명시하는 애너테이션

### @Enumerated
- enum 타입과 매핑할 때 사용하는 애너테이션
- 사용 타입
  - @Enumerated(EnumType.ORDINAL) : enum의 순서를 나타내는 숫자를 테이블에 저장
  - @Enumerated(EnumType.STRING) : enum의 이름을 테이블에 저장

# 주의사항 및 권장사항

### 기본 생성자
- 기본 생성자가 없으면 Spring Data JPA를 사용할 때 에러가 발생하는 경우가 있음. 습관적으로 기본 생성자를 추가할 것.

### @Column
- 생략할 수도 있지만, 가독성을 위해 달아주는 것을 권장

### 원시 타입 필드
- 원시 타입(int, long)으로 생성된 Column에 @Column을 생략하면 기본적으로 nullable-false(not null)로 설정된다.
- 하지만 원시 타입 필드에 속성값이 없는 @Column 애너테이션만 사용하면 nullable-true로 설정된다.
- @Column을 붙이고 nullable-false 설정을 항상 해줄 것

### @Enumerated
- EnumType.ORDINAL보다는 EnumType.STRING을 사용 권장
- EnumType.ORDINAL 사용 시 enum의 순서가 뒤바뀔 수도 있음.
